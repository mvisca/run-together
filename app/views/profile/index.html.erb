<div class="container text-dark">

  <%# WELCOME ROW %>
  <div class="row mt-5">
    <div class="col mb-0">
      <h1 class="mb-0 text-center">
        Welcome <%= current_user.name
        .split(' ')[0]
        .capitalize %>
        </h1>
    </div>
  </div>

  <%# USER PROFILE BLOCK %>
  <%= render 'shared/user_profile_block' %>

  <%# DASHBOARD STATS CARDS %>
  <div class="row justify-content-center mt-4 mb-5">
    <div class="col col-12 col-lg-8">
      <div class="row g-3">

        <%# ACTIVE RACES STAT %>
        <div class="col-12 col-md-4">
          <div class="rt-stat-card rt-shadow rt-rounded bg-light p-3 text-center">
            <div class="rt-stat-icon mb-2">
              <span class="rt-stat-emoji">üèÜ</span>
            </div>
            <div class="rt-stat-number text-dark fw-bold mb-1">
              <%= @my_races.count + @optin_races.count %>
            </div>
            <div class="rt-stat-label text-muted">
              Active Races
            </div>
          </div>
        </div>

        <%# CREATED RACES STAT %>
        <div class="col-12 col-md-4">
          <div class="rt-stat-card rt-shadow rt-rounded bg-light p-3 text-center">
            <div class="rt-stat-icon mb-2">
              <span class="rt-stat-emoji">‚ú®</span>
            </div>
            <div class="rt-stat-number text-dark fw-bold mb-1">
              <%= @my_races.count %>
            </div>
            <div class="rt-stat-label text-muted">
              Created by You
            </div>
          </div>
        </div>

        <%# JOINED RACES STAT %>
        <div class="col-12 col-md-4">
          <div class="rt-stat-card rt-shadow rt-rounded bg-light p-3 text-center">
            <div class="rt-stat-icon mb-2">
              <span class="rt-stat-emoji">üèÉ</span>
            </div>
            <div class="rt-stat-number text-dark fw-bold mb-1">
              <%= @optin_races.count %>
            </div>
            <div class="rt-stat-label text-muted">
              Races Joined
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <%# LINE %>
  <div class="row justify-content-center mt-5 mb-0">
    <div class="col col-sm-12 px-3">
      <div class="rt-banner-line-dark">
      </div>
    </div>
  </div>

  <div class="row mt-5">
    <h2 class="text-center text-dark">Your races</h2>
  </div>

  <% if @my_races.any? %>
    <div class="row row-cols-12 row-cols-sm-6 row-cols-md-4 row-cols-xl-3">
      <% @my_races.each do |race| %>
        <% @race = race %>
        <%= render 'shared/card' %>
      <% end %>
    </div>
    <% else %>
    <div class="row justify-content-center">
      <div class="col">
        <p class="text-center mb-4">
          You don't have any race yet
        </p>
        <div class="text-center">
          <%= link_to "Create a race",
          new_race_path,
          class: "btn rt-btn text-center rt-hili-brand"
          %>
        </div>
      </div>
    </div>
  <% end %>


  <%# LINE %>
  <div class="row justify-content-center mt-5 mb-0">
    <div class="col col-sm-12 px-3">
      <div class="rt-banner-line-dark">
      </div>
    </div>
  </div>

  <div class="row my-5">
    <h2 class="text-center text-dark">
      Races you've joined
    </h2>

      <% if @optin_races.any? %>
        <div class="row">
          <% @optin_races.each do |race| %>
            <% @race = race %>
            <%= render 'shared/card' %>
          <% end %>
        </div>
      <% else %>
        <div class="row justify-content-center">
          <div class="col col-10">
            <p class="text-center mb-4">
              You didn't join any race yet
            </p>
            <div class="text-center">
              <%= link_to "Find race",
              races_path,
              class: "btn rt-btn text-center rt-hili-brand"
              %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
